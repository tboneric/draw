<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å€¼ç­/æŠ½å¥–å°å·¥å…·</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f5f7fa;
            --text-color: #333;
            --highlight-color: #ff6b6b;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }

        .container {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 450px;
            text-align: center;
        }

        h2 {
            color: var(--text-color);
            margin-bottom: 1.5rem;
        }

        /* æ˜¾ç¤ºåŒºåŸŸ */
        .display-area {
            background-color: var(--secondary-color);
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            border: 2px solid #e1e4e8;
            overflow: hidden;
        }

        #result-name {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
            transition: transform 0.1s;
        }

        /* æ§åˆ¶æŒ‰é’® */
        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        button {
            padding: 10px 25px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        #start-btn {
            background-color: var(--primary-color);
            color: white;
        }

        #start-btn:hover {
            background-color: #357abd;
        }

        #start-btn.running {
            background-color: var(--highlight-color);
        }

        #reset-btn {
            background-color: #e0e0e0;
            color: #555;
        }

        #reset-btn:hover {
            background-color: #d0d0d0;
        }

        /* è®¾ç½®åŒºåŸŸ */
        .settings {
            text-align: left;
            border-top: 1px solid #eee;
            padding-top: 1rem;
        }

        textarea {
            width: 100%;
            height: 80px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            resize: vertical;
            margin-bottom: 10px;
            box-sizing: border-box;
            font-family: inherit;
        }

        .options {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            color: #666;
        }

        .options input {
            margin-right: 8px;
        }

        .status-text {
            margin-top: 5px;
            font-size: 0.85rem;
            color: #888;
            text-align: right;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ‰ å€¼ç­/æŠ½å¥–åŠ©æ‰‹</h2>
    
    <div class="display-area">
        <div id="result-name">å‡†å¤‡å°±ç»ª</div>
    </div>

    <div class="controls">
        <button id="start-btn" onclick="toggleDraw()">å¼€å§‹æŠ½å¥–</button>
        <button id="reset-btn" onclick="resetList()">é‡ç½®åå•</button>
    </div>

    <div class="settings">
        <label for="names-input" style="font-weight: bold; display: block; margin-bottom: 5px;">åå•è®¾ç½® (ç”¨å›è½¦æ¢è¡Œåˆ†éš”):</label>
        <textarea id="names-input" placeholder="å¼ ä¸‰&#10;æå››&#10;ç‹äº”&#10;èµµå…­" oninput="updateList()">å¼ ä¸‰
æå››
ç‹äº”
èµµå…­
é’±ä¸ƒ
å­™å…«</textarea>
        
        <div class="options">
            <input type="checkbox" id="remove-after-draw">
            <label for="remove-after-draw">æŠ½ä¸­åä»åå•ç§»é™¤ (é€‚åˆæ’ç­)</label>
        </div>
        <div class="status-text" id="count-display">å½“å‰åå•: 6 äºº</div>
    </div>
</div>

<script>
    let names = []; // å­˜å‚¨å½“å‰çš„åå•
    let timer = null; // å®šæ—¶å™¨
    let isRunning = false; // çŠ¶æ€æ ‡è®°

    // åˆå§‹åŒ–
    window.onload = function() {
        updateList();
    };

    // æ›´æ–°åå•æ•°æ®
    function updateList() {
        const input = document.getElementById('names-input').value;
        // è¿‡æ»¤æ‰ç©ºè¡Œ
        names = input.split('\n').map(name => name.trim()).filter(name => name !== '');
        document.getElementById('count-display').innerText = `å½“å‰åå•: ${names.length} äºº`;
    }

    // é‡ç½®åå•åˆ°é»˜è®¤å€¼ï¼ˆæˆ–è€…ä½ å¯ä»¥æ¸…ç©ºï¼‰
    function resetList() {
        const defaultNames = "å¼ ä¸‰\næå››\nç‹äº”\nèµµå…­\né’±ä¸ƒ\nå­™å…«";
        document.getElementById('names-input').value = defaultNames;
        document.getElementById('result-name').innerText = "å‡†å¤‡å°±ç»ª";
        document.getElementById('result-name').style.color = "var(--primary-color)";
        updateList();
    }

    // å¼€å§‹/åœæ­¢ æŠ½å¥–é€»è¾‘
    function toggleDraw() {
        const btn = document.getElementById('start-btn');
        const display = document.getElementById('result-name');
        
        if (names.length === 0) {
            alert('åå•ä¸ºç©ºï¼Œè¯·å…ˆåœ¨ä¸‹æ–¹è¾“å…¥åå­—ï¼');
            return;
        }

        if (!isRunning) {
            // === å¼€å§‹æ»šåŠ¨ ===
            isRunning = true;
            btn.innerText = 'åœæ­¢';
            btn.classList.add('running');
            display.style.color = "var(--text-color)"; // æ»šåŠ¨æ—¶é¢œè‰²

            timer = setInterval(() => {
                const randomIndex = Math.floor(Math.random() * names.length);
                display.innerText = names[randomIndex];
            }, 50); // 50æ¯«ç§’åˆ‡æ¢ä¸€æ¬¡åå­—
        } else {
            // === åœæ­¢å¹¶é€‰ä¸­ ===
            clearInterval(timer);
            isRunning = false;
            btn.innerText = 'å¼€å§‹æŠ½å¥–';
            btn.classList.remove('running');
            
            // æœ€ç»ˆç¡®å®šä¸€ä¸ªåå­—
            const finalIndex = Math.floor(Math.random() * names.length);
            const winner = names[finalIndex];
            
            display.innerText = winner;
            display.style.color = "var(--highlight-color)"; // é€‰ä¸­æ—¶é«˜äº®
            display.style.transform = "scale(1.2)";
            setTimeout(() => display.style.transform = "scale(1)", 200);

            // å¦‚æœå‹¾é€‰äº†â€œæŠ½ä¸­åç§»é™¤â€
            const shouldRemove = document.getElementById('remove-after-draw').checked;
            if (shouldRemove) {
                removeName(winner);
            }
        }
    }

    // ä»åå•ä¸­ç§»é™¤åå­—
    function removeName(nameToRemove) {
        // æ›´æ–°æ•°ç»„
        names = names.filter(name => name !== nameToRemove);
        
        // æ›´æ–°è¾“å…¥æ¡†æ˜¾ç¤º
        const inputArea = document.getElementById('names-input');
        inputArea.value = names.join('\n');
        
        // æ›´æ–°è®¡æ•°
        document.getElementById('count-display').innerText = `å‰©ä½™åå•: ${names.length} äºº`;

        if (names.length === 0) {
            setTimeout(() => alert("åå•å·²å…¨éƒ¨æŠ½å®Œï¼"), 500);
        }
    }
</script>

</body>
</html>
